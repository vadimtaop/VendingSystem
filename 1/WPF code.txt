using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace VendingSystemWPF.ADO
{
    public static class AppData
    {
        public static VendingSystemDBEntities db = new VendingSystemDBEntities();
    }
}
<Page x:Class="VendingSystemWPF.Pages.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:VendingSystemWPF.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="700"
      d:DesignWidth="1000"
      Title="–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã">
    
    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <RowDefinition Height="*"/>
            <!-- –í–µ—Ä—Ö–Ω–∏–µ –±–ª–æ–∫–∏ -->
            <RowDefinition Height="*"/>
            <!-- –ì—Ä–∞—Ñ–∏–∫ –∏ –ù–æ–≤–æ—Å—Ç–∏ -->
        </Grid.RowDefinitions>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <TextBlock Text="–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç. –ì–ª–∞–≤–Ω–∞—è" FontSize="24" FontWeight="Bold" Margin="20,10" VerticalAlignment="Center"/>

        <!-- –í–ï–†–•–ù–ò–ô –†–Ø–î –ë–õ–û–ö–û–í -->
        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- –ë–ª–æ–∫ 1: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ—Ç–∏ (–ö—Ä–∏—Ç–µ—Ä–∏–π: % —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö) -->
            <Border Grid.Column="0" Background="White" Margin="10" CornerRadius="10" Effect="{StaticResource MyShadow}">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ—Ç–∏" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <!-- –ò–º–∏—Ç–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã (–ü—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä) -->
                    <Grid Height="150" Width="150" Margin="0,10">
                        <ProgressBar Name="EfficiencyBar" Value="85" Maximum="100" Height="20" Width="150" Foreground="Green"/>
                        <TextBlock Name="EfficiencyText" Text="85%" FontSize="30" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- –ë–ª–æ–∫ 2: –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ç–∏ (–ö—Ä–∏—Ç–µ—Ä–∏–π: –†–∞–±–æ—Ç–∞–µ—Ç/–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç) -->
            <Border Grid.Column="1" Background="White" Margin="10" CornerRadius="10">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ç–∏" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <StackPanel Orientation="Horizontal" Margin="0,20">
                        <StackPanel Margin="10">
                            <Ellipse Width="20" Height="20" Fill="Green"/>
                            <TextBlock Name="CountWorking" Text="10" HorizontalAlignment="Center" FontSize="20"/>
                            <TextBlock Text="–†–∞–±–æ—Ç–∞–µ—Ç" FontSize="10"/>
                        </StackPanel>
                        <StackPanel Margin="10">
                            <Ellipse Width="20" Height="20" Fill="Red"/>
                            <TextBlock Name="CountBroken" Text="2" HorizontalAlignment="Center" FontSize="20"/>
                            <TextBlock Text="–°–ª–æ–º–∞–Ω–æ" FontSize="10"/>
                        </StackPanel>
                        <StackPanel Margin="10">
                            <Ellipse Width="20" Height="20" Fill="Blue"/>
                            <TextBlock Name="CountService" Text="1" HorizontalAlignment="Center" FontSize="20"/>
                            <TextBlock Text="–°–µ—Ä–≤–∏—Å" FontSize="10"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- –ë–ª–æ–∫ 3: –°–≤–æ–¥–∫–∞ (–î–µ–Ω—å–≥–∏) -->
            <Border Grid.Column="2" Background="White" Margin="10" CornerRadius="10">
                <StackPanel Margin="20">
                    <TextBlock Text="–°–≤–æ–¥–∫–∞" FontSize="18" FontWeight="Bold"/>
                    <Grid Margin="0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="–í—ã—Ä—É—á–∫–∞ —Å–µ–≥–æ–¥–Ω—è:" Foreground="Gray"/>
                        <TextBlock Name="TxtRevenueToday" Grid.Column="1" Text="0 ‚ÇΩ" FontWeight="Bold"/>
                    </Grid>
                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="–ò–Ω–∫–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–æ:" Foreground="Gray"/>
                        <TextBlock Name="TxtIncasso" Grid.Column="1" Text="0 ‚ÇΩ" FontWeight="Bold"/>
                    </Grid>
                </StackPanel>
            </Border>
        </Grid>

        <!-- –ù–ò–ñ–ù–ò–ô –†–Ø–î -->
        <Grid Grid.Row="2" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <!-- –ì—Ä–∞—Ñ–∏–∫ —à–∏—Ä–µ -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- –ë–ª–æ–∫ 4: –î–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ (–ì—Ä–∞—Ñ–∏–∫) -->
            <Border Grid.Column="0" Background="White" Margin="10" CornerRadius="10">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="–î–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ (10 –¥–Ω–µ–π)" FontSize="16" FontWeight="Bold"/>
                        <Button Content="–ü–æ —Å—É–º–º–µ" Margin="20,0,5,0" Click="BtnSortSum_Click"/>
                        <Button Content="–ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É" Click="BtnSortCount_Click"/>
                    </StackPanel>

                    <!-- Canvas –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –∫–æ–¥–æ–º -->
                    <Canvas Name="ChartCanvas" Grid.Row="1" Margin="10,20,10,10" VerticalAlignment="Bottom"/>
                </Grid>
            </Border>

            <!-- –ë–ª–æ–∫ 5: –ù–æ–≤–æ—Å—Ç–∏ -->
            <Border Grid.Column="1" Background="White" Margin="10" CornerRadius="10">
                <StackPanel Margin="10">
                    <TextBlock Text="–ù–æ–≤–æ—Å—Ç–∏" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
                    <ListBox Name="NewsList" BorderThickness="0">
                        <!-- –ü—Ä–∏–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ -->
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,5">
                                    <TextBlock Text="{Binding Date}" FontSize="10" Foreground="Gray"/>
                                    <TextBlock Text="{Binding Title}" TextDecorations="Underline" Cursor="Hand" Foreground="Blue"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
    
</Page>
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using VendingSystemWPF.ADO;

namespace VendingSystemWPF.Pages
{
    /// <summary>
    /// –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è MainPage.xaml
    /// </summary>
    public partial class MainPage : Page
    {
        public MainPage()
        {
            InitializeComponent();
            LoadData();
        }
        private void LoadData()
        {
            try
            {
                // 1. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –°—Ç–∞—Ç—É—Å—ã
                var machines = AppData.db.VendingMachines.ToList();
                int working = machines.Count(x => x.StatusId == 1); // 1 - –†–∞–±–æ—Ç–∞–µ—Ç
                int total = machines.Count;
                int broken = machines.Count(x => x.StatusId == 2);
                int service = machines.Count(x => x.StatusId == 3);

                CountWorking.Text = working.ToString();
                CountBroken.Text = broken.ToString();
                CountService.Text = service.ToString();

                if (total > 0)
                {
                    double eff = (double)working / total * 100;
                    EfficiencyBar.Value = eff;
                    EfficiencyText.Text = $"{Math.Round(eff)}%";
                }

                // 2. –°–≤–æ–¥–∫–∞ (–ü—Ä–æ–¥–∞–∂–∏)
                var sales = AppData.db.Sales.ToList();
                var today = DateTime.Today;
                decimal revenueToday = sales.Where(s => s.SaleDate.Date == today).Sum(s => s.TotalSum);
                TxtRevenueToday.Text = $"{revenueToday:N2} ‚ÇΩ";

                // 3. –ù–æ–≤–æ—Å—Ç–∏ (–ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±–∞–ª–ª–æ–≤)
                var news = new List<dynamic> {
                    new { Date = "10.03.2025", Title = "–ù–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã Necta" },
                    new { Date = "08.03.2025", Title = "–° –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!" },
                    new { Date = "01.03.2025", Title = "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏" }
                };
                NewsList.ItemsSource = news;

                // 4. –ì—Ä–∞—Ñ–∏–∫ (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ —Å—É–º–º–µ)
                DrawChart(true);
            }
            catch { }
        }

        private void DrawChart(bool bySum)
        {
            ChartCanvas.Children.Clear();
            var sales = AppData.db.Sales.ToList();

            // –î–∞–Ω–Ω—ã–µ –∑–∞ 10 –¥–Ω–µ–π
            var data = new List<double>();
            for (int i = 9; i >= 0; i--)
            {
                var date = DateTime.Today.AddDays(-i);
                var daySales = sales.Where(s => s.SaleDate.Date == date);

                if (bySum)
                    data.Add((double)daySales.Sum(s => s.TotalSum));
                else
                    data.Add(daySales.Sum(s => s.Count));
            }

            double maxVal = data.Max();
            if (maxVal == 0) maxVal = 1;

            double canvasWidth = ChartCanvas.ActualWidth > 0 ? ChartCanvas.ActualWidth : 400;
            double canvasHeight = 150;
            double barWidth = (canvasWidth / 10) - 5;

            for (int i = 0; i < data.Count; i++)
            {
                double barHeight = (data[i] / maxVal) * canvasHeight;

                Rectangle rect = new Rectangle
                {
                    Width = barWidth,
                    Height = barHeight,
                    Fill = Brushes.LightBlue,
                    Stroke = Brushes.Blue
                };

                Canvas.SetLeft(rect, i * (barWidth + 5));
                Canvas.SetBottom(rect, 0); // –†–∏—Å—É–µ–º —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö

                ChartCanvas.Children.Add(rect);
            }
        }

        private void BtnSortSum_Click(object sender, RoutedEventArgs e) => DrawChart(true);
        private void BtnSortCount_Click(object sender, RoutedEventArgs e) => DrawChart(false);
    }
}
<Page x:Class="VendingSystemWPF.Pages.MonitorPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:VendingSystemWPF.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="600" d:DesignWidth="900"
      Title="–ú–æ–Ω–∏—Ç–æ—Ä –¢–ê"
      Loaded="Page_Loaded">

    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- –§–∏–ª—å—Ç—Ä—ã -->
            <RowDefinition Height="*"/>
            <!-- –¢–∞–±–ª–∏—Ü–∞ -->
            <RowDefinition Height="Auto"/>
            <!-- –ò—Ç–æ–≥–∏ -->
        </Grid.RowDefinitions>

        <!-- –§–∏–ª—å—Ç—Ä—ã (–æ—Å—Ç–∞–≤–ª—è–µ–º, —Ç.–∫. —ç—Ç–æ –ª–µ–≥–∫–æ –∏ –¥–∞–µ—Ç –±–∞–ª–ª—ã) -->
        <Border Grid.Row="0" Background="White" Padding="10" BorderBrush="#DDD" BorderThickness="0,0,0,1">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="–°—Ç–∞—Ç—É—Å:" VerticalAlignment="Center" Margin="5"/>
                <ComboBox Name="StatusFilterComboBox" Width="120" SelectionChanged="Filter_Changed"/>
                <TextBlock Text="–°–æ—Å—Ç–æ—è–Ω–∏–µ:" VerticalAlignment="Center" Margin="15,5,5,5"/>
                <ComboBox Name="EventFilterComboBox" Width="120" SelectionChanged="Filter_Changed"/>
            </StackPanel>
        </Border>

        <!-- –£–ü–†–û–©–ï–ù–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê -->
        <DataGrid Grid.Row="1" Name="MonitorDataGrid" AutoGenerateColumns="False" IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="‚Ññ" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="–ê–≤—Ç–æ–º–∞—Ç" Binding="{Binding Name}" Width="*"/>
                <DataGridTextColumn Header="–°—Ç–∞—Ç—É—Å" Binding="{Binding StatusText}" Width="100"/>
                <DataGridTextColumn Header="–°–æ–±—ã—Ç–∏–µ" Binding="{Binding EventText}" Width="100"/>

                <!-- ProgressBar - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏ –¥–∞–µ—Ç –±–∞–ª–ª—ã –∑–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é -->
                <DataGridTemplateColumn Header="–ó–∞–≥—Ä—É–∑–∫–∞" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ProgressBar Value="{Binding LoadPercentage}" Maximum="100" Height="20"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTextColumn Header="–î–µ–Ω—å–≥–∏" Binding="{Binding CashAmount, StringFormat=C, ConverterCulture=ru-RU}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- –ò—Ç–æ–≥–∏ -->
        <Border Grid.Row="2" Background="White" Padding="10">
            <StackPanel Orientation="Horizontal">
                <TextBlock Name="TotalMachinesTextBlock" Text="–ò—Ç–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–æ–≤: 0" FontWeight="Bold"/>
                <TextBlock Name="TotalCashTextBlock" Text="–î–µ–Ω–µ–≥ –≤ –∞–≤—Ç–æ–º–∞—Ç–∞—Ö: 0" FontWeight="Bold" Margin="30,0,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Page>
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace VendingSystemWPF.Pages
{
    /// <summary>
    /// –£–ü–†–û–©–ï–ù–ù–´–ô –∫–ª–∞—Å—Å –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –∏ —Ü–∏—Ñ—Ä—ã.
    /// </summary>
    public class SimpleMonitorData
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string StatusText { get; set; }  // "–†–∞–±–æ—Ç–∞–µ—Ç", "–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç", "–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ"
        public string EventText { get; set; }   // "–û—à–∏–±–æ–∫ –Ω–µ—Ç", "–ù–∏–∑–∫–∏–π –∑–∞–ø–∞—Å", "–ó–∞–º—è—Ç–∏–µ"
        public int LoadPercentage { get; set; }
        public decimal CashAmount { get; set; }
    }


    public partial class MonitorPage : Page
    {
        // –°–ø–∏—Å–æ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –í–°–ï–• –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å "API"
        private List<SimpleMonitorData> _allData = new List<SimpleMonitorData>();

        public MonitorPage()
        {
            InitializeComponent();
        }

        private void Page_Loaded(object sender, RoutedEventArgs e)
        {
            // 1. –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∏)
            LoadDummyData();
            // 2. –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
            PopulateFilters();
            // 3. –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            UpdateDataView();
        }

        // --- –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–∫–∞ —ç–º—É–ª—è—Ü–∏—è) ---
        private void LoadDummyData()
        {
            // –ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤. –ù–∏–∫–∞–∫–∏—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫.
            _allData = new List<SimpleMonitorData>
            {
                new SimpleMonitorData { Id = 1, Name = "–ê–≤—Ç–æ–º–∞—Ç –≤ —Ö–æ–ª–ª–µ", StatusText = "–†–∞–±–æ—Ç–∞–µ—Ç", EventText = "–û—à–∏–±–æ–∫ –Ω–µ—Ç", LoadPercentage = 75, CashAmount = 12550 },
                new SimpleMonitorData { Id = 2, Name = "–ê–≤—Ç–æ–º–∞—Ç –≤ —Å—Ç–æ–ª–æ–≤–æ–π", StatusText = "–†–∞–±–æ—Ç–∞–µ—Ç", EventText = "–ù–∏–∑–∫–∏–π –∑–∞–ø–∞—Å", LoadPercentage = 25, CashAmount = 3200 },
                new SimpleMonitorData { Id = 3, Name = "–ê–≤—Ç–æ–º–∞—Ç –Ω–∞ 3 —ç—Ç–∞–∂–µ", StatusText = "–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç", EventText = "–ó–∞–º—è—Ç–∏–µ", LoadPercentage = 90, CashAmount = 15400 },
                new SimpleMonitorData { Id = 4, Name = "–ê–≤—Ç–æ–º–∞—Ç —É –≤—Ö–æ–¥–∞", StatusText = "–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ", EventText = "–û—à–∏–±–æ–∫ –Ω–µ—Ç", LoadPercentage = 100, CashAmount = 0 }
            };
        }

        // --- –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ ---
        private void PopulateFilters()
        {
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏, –ø–ª—é—Å –ø—É–Ω–∫—Ç "–í—Å–µ"
            StatusFilterComboBox.Items.Add("–í—Å–µ");
            EventFilterComboBox.Items.Add("–í—Å–µ");

            // –ë–µ—Ä–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –Ω–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
            foreach (var status in _allData.Select(d => d.StatusText).Distinct())
            {
                StatusFilterComboBox.Items.Add(status);
            }
            foreach (var evt in _allData.Select(d => d.EventText).Distinct())
            {
                EventFilterComboBox.Items.Add(evt);
            }

            // –í—ã–±–∏—Ä–∞–µ–º "–í—Å–µ" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            StatusFilterComboBox.SelectedIndex = 0;
            EventFilterComboBox.SelectedIndex = 0;
        }

        // --- –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤) ---
        private void UpdateDataView()
        {
            var filteredData = _allData;

            // –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
            if (StatusFilterComboBox.SelectedIndex > 0)
            {
                string selectedStatus = StatusFilterComboBox.SelectedItem.ToString();
                filteredData = filteredData.Where(d => d.StatusText == selectedStatus).ToList();
            }

            // –§–∏–ª—å—Ç—Ä –ø–æ —Å–æ–±—ã—Ç–∏—é
            if (EventFilterComboBox.SelectedIndex > 0)
            {
                string selectedEvent = EventFilterComboBox.SelectedItem.ToString();
                filteredData = filteredData.Where(d => d.EventText == selectedEvent).ToList();
            }

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            MonitorDataGrid.ItemsSource = filteredData;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Ç–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            TotalMachinesTextBlock.Text = $"–ò—Ç–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–æ–≤: {filteredData.Count}";
            TotalCashTextBlock.Text = $"–î–µ–Ω–µ–≥ –≤ –∞–≤—Ç–æ–º–∞—Ç–∞—Ö: {filteredData.Sum(d => d.CashAmount):C}";
        }

        // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ ---
        private void Filter_Changed(object sender, SelectionChangedEventArgs e)
        {
            // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
            if (_allData.Any())
            {
                UpdateDataView();
            }
        }
    }
}
<Page x:Class="VendingSystemWPF.Pages.VendingMachinesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:VendingSystemWPF.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="600"
      d:DesignWidth="900"
      Title="–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã">

    <Grid Background="#F9F9F9">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="White" BorderBrush="#EEE" BorderThickness="0,0,0,1" Padding="10">
            <StackPanel Orientation="Horizontal">
                <Button Name="RefreshButton" Content="üîÑ –û–±–Ω–æ–≤–∏—Ç—å" Margin="5" Click="RefreshButton_Click" Background="#D0EFFF"/>
                <TextBlock Text="–§–∏–ª—å—Ç—Ä:" VerticalAlignment="Center" Margin="15,5,5,5"/>
                <TextBox Name="FilterTextBox" Width="200" TextChanged="FilterTextChanged" VerticalAlignment="Center"/>
                <Button Name="AddButton" Content="–î–æ–±–∞–≤–∏—Ç—å (ADO)" Margin="20,0,0,0" Click="AddButtonClick"/>
                
                <!-- –ö–ù–û–ü–ö–ê –≠–ö–°–ü–û–†–¢–ê -->
                <Button Name="ExportButton" Content="–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV" Margin="20,0,0,0" Click="ExportButton_Click"/>
                
                <CheckBox Name="ToggleViewCheck" Content="–†–µ–∂–∏–º –ø–ª–∏—Ç–∫–∏" Margin="20,0,0,0" VerticalAlignment="Center" Checked="ToggleView_Checked" Unchecked="ToggleView_Checked"/>
            </StackPanel>
        </Border>

        <!-- 1. –¢–ê–ë–õ–ò–¶–ê (DataGrid) - –æ–Ω–∞ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å -->
        <DataGrid Grid.Row="1" Name="VendingMachinesDataGrid" AutoGenerateColumns="False" IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="–ù–∞–∑–≤–∞–Ω–∏–µ" Binding="{Binding Name}" Width="*"/>
                <DataGridTextColumn Header="–ö–æ–º–ø–∞–Ω–∏—è" Binding="{Binding Company.Title}" Width="120"/>
                <DataGridTextColumn Header="–ê–¥—Ä–µ—Å" Binding="{Binding Address}" Width="150"/>
                <DataGridTextColumn Header="–°—Ç–∞—Ç—É—Å" Binding="{Binding Status.Title}" Width="100"/>
                <DataGridTemplateColumn Header="–î–µ–π—Å—Ç–≤–∏—è" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="–£–¥–∞–ª–∏—Ç—å (ADO)" Background="Salmon" Click="DeleteButton_Click" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        
        <!-- 2. –ü–õ–ò–¢–ö–ò (ListView) - –í–°–¢–ê–í–¨ –≠–¢–û–¢ –ë–õ–û–ö –°–†–ê–ó–£ –ü–û–°–õ–ï DataGrid -->
<ListView Name="VendingMachinesListView" Visibility="Collapsed" ScrollViewer.HorizontalScrollBarVisibility="Disabled" Grid.Row="1">
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <!-- WrapPanel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –ø–ª–∏—Ç–∫–∏ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É -->
            <WrapPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
    <ListView.ItemTemplate>
        <DataTemplate>
            <!-- –ó–¥–µ—Å—å –º—ã —Ä–∏—Å—É–µ–º –æ–¥–Ω—É –ø–ª–∏—Ç–∫—É -->
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Margin="10" Padding="10" Width="200" Background="White">
                <StackPanel>
                    <TextBlock Text="{Binding Name}" FontWeight="Bold" Foreground="Blue" FontSize="14" TextWrapping="Wrap"/>
                    <TextBlock Text="{Binding Address}" Margin="0,5,0,0" Foreground="DarkSlateGray" TextWrapping="Wrap"/>
                    <TextBlock Text="{Binding Model}" Margin="0,5,0,0" FontStyle="Italic"/>
                    <Border Background="LightGreen" CornerRadius="5" Padding="5,2" Margin="0,10,0,0" HorizontalAlignment="Left">
                         <TextBlock Text="{Binding Status.Title}" FontWeight="SemiBold" Foreground="DarkGreen"/>
                    </Border>
                </StackPanel>
            </Border>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView>

        <!-- ======================================================= -->
        <!-- –ü–∞–Ω–µ–ª—å –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–ö—Ä–∏—Ç–µ—Ä–∏–π –ë.2)            -->
        <!-- ======================================================= -->
        <Border Grid.Row="2" Background="White" BorderBrush="#EEE" BorderThickness="0,1,0,0" Padding="10">
            <Grid>
                <TextBlock Name="CountTextBlock" Text="–ó–∞–≥—Ä—É–∑–∫–∞..." VerticalAlignment="Center" HorizontalAlignment="Left"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <TextBlock Name="TxtPages" Text="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1" VerticalAlignment="Center" Margin="10,0"/>
                    <Button Name="PrevButton" Content="&lt; –ù–∞–∑–∞–¥" Width="80" Click="BtnPrev_Click"/>
                    <Button Name="NextButton" Content="–í–ø–µ—Ä–µ–¥ &gt;" Width="80" Margin="5,0,0,0" Click="BtnNext_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
    
</Page>
using Microsoft.Win32;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using VendingSystemWPF.ADO;
using VendingSystemWPF.Services;
using VendingSystemWPF.Windows;

namespace VendingSystemWPF.Pages
{
    /// <summary>
    /// –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è VendingMachinesPage.xaml
    /// </summary>
    public partial class VendingMachinesPage : Page
    {
        private List<VendingMachineRemote> _allMachines = new List<VendingMachineRemote>();

        // –î–æ–±–∞–≤—å —ç—Ç–∏ –ø–æ–ª—è –≤ –Ω–∞—á–∞–ª–æ –∫–ª–∞—Å—Å–∞ VendingMachinesPage
        private int _currentPage = 1;
        private int _itemsPerPage = 10; // –ú–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å TextBox –¥–ª—è —ç—Ç–æ–≥–æ, –∫–∞–∫ —Ä–∞–Ω—å—à–µ
        private int _totalPages = 1;

        public VendingMachinesPage()
        {
            InitializeComponent();
            LoadDataFromApi(); // –í—ã–∑—ã–≤–∞–µ–º –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
        }

        // –ú–ï–¢–û–î 1: –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –° API
        private void LoadDataFromApi()
        {
            CountTextBlock.Text = "–ó–∞–≥—Ä—É–∑–∫–∞...";
            _allMachines = ApiService.GetList(); // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—ã–π —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥
            UpdateDataGrid(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        }

        // –ú–ï–¢–û–î 2: –û–ë–ù–û–í–õ–ï–ù–ò–ï –¢–ê–ë–õ–ò–¶–´ (–° –§–ò–õ–¨–¢–†–û–ú)
        // –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–ú–ï–ù–ò —Å–≤–æ–π –º–µ—Ç–æ–¥ UpdateDataGrid() –Ω–∞ —ç—Ç–æ—Ç, —Å –ª–æ–≥–∏–∫–æ–π Skip/Take
        private void UpdateDataGrid()
        {
            var viewSource = _allMachines;

            if (!string.IsNullOrWhiteSpace(FilterTextBox.Text))
            {
                viewSource = viewSource.Where(m => m.Name.ToLower().Contains(FilterTextBox.Text.ToLower())).ToList();
            }

            // --- –õ–û–ì–ò–ö–ê –ü–ê–ì–ò–ù–ê–¶–ò–ò ---
            int totalItems = viewSource.Count;
            _totalPages = (int)Math.Ceiling((double)totalItems / _itemsPerPage);
            if (_totalPages == 0) _totalPages = 1;
            if (_currentPage > _totalPages) _currentPage = _totalPages;

            // –û—Ç–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¢–ï–ö–£–©–ï–ô —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            var pagedData = viewSource.Skip((_currentPage - 1) * _itemsPerPage).Take(_itemsPerPage).ToList();

            // –í–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ UpdateDataGrid() –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É
            VendingMachinesDataGrid.ItemsSource = pagedData;

            // –ò —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–µ–µ –¥–æ–±–∞–≤—å —ç—Ç—É:
            VendingMachinesListView.ItemsSource = pagedData;

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç—ã
            CountTextBlock.Text = $"–ü–æ–∫–∞–∑–∞–Ω–æ: {pagedData.Count} –∏–∑ {totalItems}";
            TxtPages.Text = $"–°—Ç—Ä–∞–Ω–∏—Ü–∞ {_currentPage} –∏–∑ {_totalPages}";

            // –í–∫–ª—é—á–∞–µ–º/–≤—ã–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏
            PrevButton.IsEnabled = _currentPage > 1;
            NextButton.IsEnabled = _currentPage < _totalPages;
        }


        // –î–æ–±–∞–≤—å —ç—Ç–∏ –¥–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
        private void BtnPrev_Click(object sender, RoutedEventArgs e)
        {
            if (_currentPage > 1)
            {
                _currentPage--;
                UpdateDataGrid();
            }
        }

        private void BtnNext_Click(object sender, RoutedEventArgs e)
        {
            if (_currentPage < _totalPages)
            {
                _currentPage++;
                UpdateDataGrid();
            }
        }


        // –ò –ù–ï –ó–ê–ë–£–î–¨ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
        private void FilterTextChanged(object sender, TextChangedEventArgs e)
        {
            _currentPage = 1; // –°–±—Ä–æ—Å –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            UpdateDataGrid();
        }

        // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ ---

        // –ö–ù–û–ü–ö–ê "–û–ë–ù–û–í–ò–¢–¨" - –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å API
        private void RefreshButton_Click(object sender, RoutedEventArgs e)
        {
            LoadDataFromApi();
        }

        // –ö–ù–û–ü–ö–ê "–£–î–ê–õ–ò–¢–¨" - –†–ê–ë–û–¢–ê–ï–¢ –ß–ï–†–ï–ó ADO
        private void DeleteButton_Click(object sender, RoutedEventArgs e)
        {
            var button = sender as Button;
            var machineToDeleteApi = button.DataContext as VendingMachineRemote;
            if (machineToDeleteApi == null) return;

            if (MessageBox.Show($"–£–¥–∞–ª–∏—Ç—å '{machineToDeleteApi.Name}'? (–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ ADO)", "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ", MessageBoxButton.YesNo) == MessageBoxResult.Yes)
            {
                // 1. –ù–∞—Ö–æ–¥–∏–º —ç—Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç –≤ –ë–î —á–µ—Ä–µ–∑ ADO
                var machineInDb = AppData.db.VendingMachines.Find(machineToDeleteApi.Id);

                if (machineInDb != null)
                {
                    // 2. –£–¥–∞–ª—è–µ–º –∏–∑ –ë–î –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
                    AppData.db.VendingMachines.Remove(machineInDb);
                    AppData.db.SaveChanges();

                    MessageBox.Show("–£–¥–∞–ª–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –Ω–∞–∂–º–∏—Ç–µ '–û–±–Ω–æ–≤–∏—Ç—å', —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.");
                }
                else
                {
                    MessageBox.Show("–û—à–∏–±–∫–∞: –∞–≤—Ç–æ–º–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö!");
                }
            }
        }

        // –ö–ù–û–ü–ö–ê "–î–û–ë–ê–í–ò–¢–¨"
        private void AddButtonClick(object sender, RoutedEventArgs e)
        {
            new Windows.AddVendingMachineWindow().ShowDialog();
            MessageBox.Show("–î–æ–±–∞–≤–ª–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –Ω–∞–∂–º–∏—Ç–µ '–û–±–Ω–æ–≤–∏—Ç—å', —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.");
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∞ (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞)
        private void ToggleView_Checked(object sender, RoutedEventArgs e)
        {
            // –ï—Å–ª–∏ –≥–∞–ª–æ—á–∫–∞ —Å—Ç–æ–∏—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–ª–∏—Ç–∫–∏, –∏–Ω–∞—á–µ - —Ç–∞–±–ª–∏—Ü—É
            bool showListView = ToggleViewCheck.IsChecked == true;
            VendingMachinesListView.Visibility = showListView ? Visibility.Visible : Visibility.Collapsed;
            VendingMachinesDataGrid.Visibility = showListView ? Visibility.Collapsed : Visibility.Visible;
        }
        private void ExportButton_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                // 1. –ë–µ—Ä–µ–º –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –í–°–ï –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —Å—Ç—Ä–∞–Ω–∏—Ü—É.
                var dataToExport = _allMachines;
                if (!string.IsNullOrWhiteSpace(FilterTextBox.Text))
                {
                    string filterText = FilterTextBox.Text.ToLower();
                    dataToExport = dataToExport.Where(m => m.Name.ToLower().Contains(filterText)).ToList();
                }

                if (!dataToExport.Any())
                {
                    MessageBox.Show("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞.");
                    return;
                }

                // 2. –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É —Å –ø–æ–º–æ—â—å—é StringBuilder - —ç—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
                var sb = new StringBuilder();

                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–≤–∞–∂–Ω–æ –¥–ª—è CSV)
                sb.AppendLine("ID;–ù–∞–∑–≤–∞–Ω–∏–µ;–ö–æ–º–ø–∞–Ω–∏—è;–ê–¥—Ä–µ—Å;–°—Ç–∞—Ç—É—Å;–î–∞—Ç–∞ –≤–≤–æ–¥–∞");

                // 3. –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –µ–µ –≤ —Ñ–∞–π–ª
                foreach (var item in dataToExport)
                {
                    // –°–æ–±–∏—Ä–∞–µ–º —Å—Ç—Ä–æ–∫—É, —Ä–∞–∑–¥–µ–ª—è—è –ø–æ–ª—è —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π
                    string line = string.Join(";",
                        item.Id,
                        item.Name,
                        item.Company?.Title, // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤, –µ—Å–ª–∏ –∫–æ–º–ø–∞–Ω–∏—è null
                        item.Address,
                        item.Status?.Title,  // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤, –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å null
                        item.StartDate.ToString("dd.MM.yyyy")
                    );
                    sb.AppendLine(line);
                }

                // 4. –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª
                SaveFileDialog saveFileDialog = new SaveFileDialog
                {
                    Filter = "CSV —Ñ–∞–π–ª (*.csv)|*.csv", // –§–∏–ª—å—Ç—Ä, —á—Ç–æ–±—ã –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Ç–æ–ª—å–∫–æ .csv
                    FileName = $"Vending_Machines_{DateTime.Now:yyyyMMdd_HHmmss}.csv"
                };

                if (saveFileDialog.ShowDialog() == true)
                {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ, —á—Ç–æ —Å–æ–±—Ä–∞–ª–∏, –≤ —Ñ–∞–π–ª
                    // Encoding.UTF8 - –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –Ω–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∏—Å—å –≤ "–∫—Ä–∞–∫–æ–∑—è–±—Ä—ã"
                    File.WriteAllText(saveFileDialog.FileName, sb.ToString(), Encoding.UTF8);
                    MessageBox.Show($"–≠–∫—Å–ø–æ—Ä—Ç —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω!\n–§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ø–æ –ø—É—Ç–∏: {saveFileDialog.FileName}", "–£—Å–ø–µ—Ö", MessageBoxButton.OK, MessageBoxImage.Information);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show($"–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ: {ex.Message}", "–û—à–∏–±–∫–∞", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    }
}
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Http;
using System.Text;
using System.Threading.Tasks;
using System.Windows;

namespace VendingSystemWPF.Services
{
    public class VendingMachineRemote
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Address { get; set; }
        public string Model { get; set; }
        public System.DateTime StartDate { get; set; }
        public CompanyObj Company { get; set; }
        public StatusObj Status { get; set; }
        public class CompanyObj { public string Title { get; set; } }
        public class StatusObj { public string Title { get; set; } }
    }

    public static class ApiService
    {
        private static string Url = "http://localhost:5022/api/VendingMachines"; // –ü–†–û–í–ï–†–¨ –ü–û–†–¢!
        private static HttpClient client = new HttpClient();

        // –°–ò–ù–•–†–û–ù–ù–´–ô –ú–ï–¢–û–î - –ü–†–û–°–¢–û –ò –ù–ê–î–ï–ñ–ù–û
        public static List<VendingMachineRemote> GetList()
        {
            try
            {
                // .Result - –∂–¥–µ—Ç, –ø–æ–∫–∞ –¥–∞–Ω–Ω—ã–µ —Å–∫–∞—á–∞—é—Ç—Å—è, –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫.
                // –î–ª—è –∫–æ–Ω–∫—É—Ä—Å–∞ - –∏–¥–µ–∞–ª—å–Ω–æ, —Ç.–∫. —É–±–∏—Ä–∞–µ—Ç –≤—Å–µ –æ—à–∏–±–∫–∏ —Å –ø–æ—Ç–æ–∫–∞–º–∏.
                string json = client.GetStringAsync(Url).Result;
                return JsonConvert.DeserializeObject<List<VendingMachineRemote>>(json);
            }
            catch
            {
                MessageBox.Show("–û—à–∏–±–∫–∞ API! –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API-–ø—Ä–æ–µ–∫—Ç –∑–∞–ø—É—â–µ–Ω.", "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞", MessageBoxButton.OK, MessageBoxImage.Error);
                return new List<VendingMachineRemote>(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
            }
        }
    }
}
<Window x:Class="VendingSystemWPF.Windows.AddVendingMachineWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VendingSystemWPF.Windows"
        mc:Ignorable="d"
        Title="–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã"
        Height="700"
        Width="700"
        MinHeight="700"
        MinWidth="700"
        WindowStartupLocation="CenterScreen"
        Icon="/Images/icon.png">
    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>
        <Grid Background="LightBlue" Grid.Row="0">
            <TextBlock Text="–°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞"
                       Foreground="White"
                       FontSize="18"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       Margin="10 0 0 0"/>
        </Grid>

        <UniformGrid Grid.Row="1"
                     Margin="10"
                     Columns="3"
                     Height="500">
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–ù–∞–∑–≤–∞–Ω–∏–µ"
                           Style="{StaticResource AddTextBlock}"/>
                <TextBox Style="{StaticResource AddTextBox}"
                         Name="NameTextBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–ê–¥—Ä–µ—Å"
                           Style="{StaticResource AddTextBlock}"/>
                <TextBox Style="{StaticResource AddTextBox}"
                         Name="AddressTextBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–ú–æ–¥–µ–ª—å"
                           Style="{StaticResource AddTextBlock}"/>
                <TextBox Style="{StaticResource AddTextBox}"
                         Name="ModelTextBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–¢–∏–ø"
                           Style="{StaticResource AddTextBlock}"/>
                <ComboBox Style="{StaticResource AddComboBox}"
                         Name="TypeComboBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä"
                           Style="{StaticResource AddTextBlock}"/>
                <TextBox Style="{StaticResource AddTextBox}"
                         Name="SerialNumberTextBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–ò–Ω–≤–µ–Ω—Ç–∞—Ä–Ω—ã–π –Ω–æ–º–µ—Ä"
                           Style="{StaticResource AddTextBlock}"/>
                <TextBox Style="{StaticResource AddTextBox}"
                         Name="InventoryNumberTextBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å"
                           Style="{StaticResource AddTextBlock}"/>
                <TextBox Style="{StaticResource AddTextBox}"
                         Name="ManufacturerTextBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–î–∞—Ç–∞ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è"
                           Style="{StaticResource AddTextBlock}"/>
                <DatePicker Style="{StaticResource AddDatePicker}"
                         Name="ManufactureDatePicker"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏"
                           Style="{StaticResource AddTextBlock}"/>
                <DatePicker Style="{StaticResource AddDatePicker}"
                         Name="StartDatePicker"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–†–µ—Å—É—Ä—Å –≤ —á–∞—Å–∞—Ö"
                           Style="{StaticResource AddTextBlock}"/>
                <TextBox Style="{StaticResource AddTextBox}"
                         Name="ResourceHourTextBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–°—Ç–∞—Ç—É—Å"
                           Style="{StaticResource AddTextBlock}"/>
                <ComboBox Style="{StaticResource AddComboBox}"
                         Name="StatusComboBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞"
                           Style="{StaticResource AddTextBlock}"/>
                <ComboBox Style="{StaticResource AddComboBox}"
                         Name="CountryComboBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–ö–æ–º–ø–∞–Ω–∏—è"
                           Style="{StaticResource AddTextBlock}"/>
                <ComboBox Style="{StaticResource AddComboBox}"
                         Name="CompanyComboBox"/>
            </Grid>
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <TextBlock Text="–ú–æ–¥–µ–º"
                           Style="{StaticResource AddTextBlock}"/>
                <ComboBox Style="{StaticResource AddComboBox}"
                         Name="ModemComboBox"/>
            </Grid>
        </UniformGrid>

        <StackPanel VerticalAlignment="Center"
                    HorizontalAlignment="Left"
                    Grid.Row="2"
                    Orientation="Horizontal">
            <Button Content="–î–æ–±–∞–≤–∏—Ç—å"
                    Height="30"
                    Width="150"
                    FontSize="14"
                    Click="AddButtonClick"
                    Background="LightBlue"
                    BorderThickness="0"
                    Margin="50 0 0 0"/>
            <Button Content="–û—Ç–º–µ–Ω–∏—Ç—å"
                    Height="30"
                    Width="150"
                    FontSize="14"
                    Click="CancelButtonClick"
                    Background="LightGray"
                    BorderThickness="0"
                    Margin="20 0 0 0"/>
        </StackPanel>

    </Grid>
</Window>
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using VendingSystemWPF.ADO;
using static System.Net.Mime.MediaTypeNames;

namespace VendingSystemWPF.Windows
{
    /// <summary>
    /// –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è AddVendingMachineWindow.xaml
    /// </summary>
    public partial class AddVendingMachineWindow : Window
    {
        public AddVendingMachineWindow()
        {
            InitializeComponent();

            LoadData();
        }

        private void LoadData()
        {
            try
            {
                TypeComboBox.ItemsSource = AppData.db.MachineTypes.ToList();
                TypeComboBox.DisplayMemberPath = "Title";
                TypeComboBox.SelectedValuePath = "Id";

                StatusComboBox.ItemsSource = AppData.db.MachineStatuses.ToList();
                StatusComboBox.DisplayMemberPath = "Title";
                StatusComboBox.SelectedValuePath = "Id";

                CountryComboBox.ItemsSource = AppData.db.Countries.ToList();
                CountryComboBox.DisplayMemberPath = "Title";
                CountryComboBox.SelectedValuePath = "Id";

                CompanyComboBox.ItemsSource = AppData.db.Companies.ToList();
                CompanyComboBox.DisplayMemberPath = "Title";
                CompanyComboBox.SelectedValuePath = "Id";

                ModemComboBox.ItemsSource = AppData.db.Modems.ToList();
                ModemComboBox.DisplayMemberPath = "Title";
                ModemComboBox.SelectedValuePath = "Id";
            }
            catch (Exception ex)
            {
                MessageBox.Show($"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {ex.Message}",
                    "–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã",
                    MessageBoxButton.OK,
                    MessageBoxImage.Error);
            }
        }

        private void AddButtonClick(object sender, RoutedEventArgs e)
        {
            try
            {
                VendingMachines vendingMachines = new VendingMachines();

                vendingMachines.Name = NameTextBox.Text;
                vendingMachines.Address = AddressTextBox.Text;
                vendingMachines.Model = ModelTextBox.Text;

                vendingMachines.MachineTypeId = (int)TypeComboBox.SelectedValue;

                vendingMachines.SerialNumber = SerialNumberTextBox.Text;
                vendingMachines.InventoryNumber = InventoryNumberTextBox.Text;
                vendingMachines.Manufacturer = ManufacturerTextBox.Text;

                vendingMachines.ManufactureDate = ManufactureDatePicker.SelectedDate.Value;
                vendingMachines.StartDate = StartDatePicker.SelectedDate.Value;

                vendingMachines.ResourceHour = int.Parse(ResourceHourTextBox.Text);

                vendingMachines.StatusId = (int)StatusComboBox.SelectedValue;
                vendingMachines.CountryId = (int)CountryComboBox.SelectedValue;
                vendingMachines.CompanyId = (int)CompanyComboBox.SelectedValue;
                vendingMachines.ModemId = (int)ModemComboBox.SelectedValue;

                vendingMachines.TotalProfit = 1;
                vendingMachines.LastCheckDate = DateTime.Now;
                vendingMachines.InterCheckMonth =1;
                vendingMachines.NextCheckDate = DateTime.Now;
                vendingMachines.ServiceTime = 1;
                vendingMachines.InventoryDate = DateTime.Now;
                vendingMachines.CreateDate = DateTime.Now;

                AppData.db.VendingMachines.Add(vendingMachines);
                AppData.db.SaveChanges();

                MessageBox.Show("–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã!",
                    "–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã",
                    MessageBoxButton.OK,
                    MessageBoxImage.Information);

                this.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show($"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {ex.Message}",
                    "–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã",
                    MessageBoxButton.OK,
                    MessageBoxImage.Error);
            }
        }

        private void CancelButtonClick(object sender, RoutedEventArgs e)
        {
            this.Close();
        }
    }
}
<Window x:Class="VendingSystemWPF.Windows.AuthWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VendingSystemWPF.Windows"
        mc:Ignorable="d"
        Title="–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã"
        Height="500"
        Width="800"
        MinHeight="500"
        MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Icon="/Images/icon.png">
    <Grid Background="AliceBlue">
        <StackPanel Orientation="Vertical"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
            <TextBlock Text="–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è"
                       FontSize="28"
                       FontWeight="DemiBold"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="–õ–æ–≥–∏–Ω:"
                       FontSize="18"
                       Margin="0 50 0 0"/>
            <TextBox Name="LoginTextBox"
                     FontSize="18"
                     Height="30"
                     Width="300"/>
            <TextBlock Text="–ü–∞—Ä–æ–ª—å:"
                       FontSize="18"
                       Margin="0 20 0 0"/>
            <PasswordBox Name="PasswordBox"
                         FontSize="18"
                         Height="30"
                         Width="300"/>
            <Button Content="–í–æ–π—Ç–∏"
                    FontSize="18"
                    Background="White"
                    Height="30"
                    Width="300"
                    Margin="0 50 0 0"
                    Click="LoginButtonClick"
                    IsDefault="True"/>
        </StackPanel>
    </Grid>
</Window>
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using VendingSystemWPF.ADO;
using VendingSystemWPF.Services;

namespace VendingSystemWPF.Windows
{
    /// <summary>
    /// –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è AuthWindow.xaml
    /// </summary>
    public partial class AuthWindow : Window
    {
        //private ApiService _apiService; // –î–ª—è API
        public AuthWindow()
        {
            InitializeComponent();

            //_apiService = new ApiService(); // –î–ª—è API
        }

        private void LoginButtonClick(object sender, RoutedEventArgs e)
        {
            try
            {
                string login = LoginTextBox.Text.Trim();
                string password = PasswordBox.Password.Trim(); // –í —Ä–µ–∞–ª–µ –Ω—É–∂–µ–Ω —Ö–µ—à, –Ω–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ —Ç–∞–∫

                if (string.IsNullOrEmpty(login) || string.IsNullOrEmpty(password))
                {
                    MessageBox.Show("–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å!");
                    return;
                }

                // –ó–ê–ü–†–û–° –ù–ê–ü–†–Ø–ú–£–Æ –í –ë–î –ß–ï–†–ï–ó ADO (Entity Framework)
                var user = AppData.db.Users.FirstOrDefault(u => u.Login == login && u.PasswordHash == password);

                if (user != null)
                {
                    // –ü–æ–ª—É—á–∞–µ–º —Ä–æ–ª—å (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ Role - —ç—Ç–æ –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –∏–ª–∏ int)
                    // –ü—Ä–æ–≤–µ—Ä—å –≤ —Å–≤–æ–µ–π –º–æ–¥–µ–ª–∏, –∫–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (Roles –∏–ª–∏ RoleNavigation)
                    string roleName = user.Roles != null ? user.Roles.Title : "–°–æ—Ç—Ä—É–¥–Ω–∏–∫";
                    string fio = $"{user.Surname} {user.Name}";

                    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
                    GeneralWindow generalWindow = new GeneralWindow(fio, roleName);
                    generalWindow.Show();
                    this.Close();
                }
                else
                {
                    MessageBox.Show("–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å!");
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("–û—à–∏–±–∫–∞ –ë–î: " + ex.Message);
            }
        }
    }
}
<Window x:Class="VendingSystemWPF.Windows.GeneralWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VendingSystemWPF.Windows"
        mc:Ignorable="d"
        Title="–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã"
        Height="700"
        Width="1000"
        MinHeight="700"
        MinWidth="1000"
        WindowStartupLocation="CenterScreen"
        Icon="/Images/icon.png">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Image Source="../Images/icon.png"
                   Width="40"
                   Height="40"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Left"/>
            <Button VerticalAlignment="Center"
                    HorizontalAlignment="Right"
                    Height="40"
                    Width="150"
                    Background="White"
                    HorizontalContentAlignment="Left"
                    Click="ProfileButtonClick"
                    Name="ProfileButton">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Image Source="/Images/icon.png"
                           Width="30"
                           Height="30"/>
                    <StackPanel Grid.Column="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Orientation="Vertical">
                        <TextBlock FontSize="12"
                                   Name="FioTextBlock"/>
                        <TextBlock FontSize="10"
                                   Foreground="Gray"
                                   Name="RoleTextBlock"/>
                    </StackPanel>
                </Grid>
            </Button>
            <Popup Name="ProfilePopup"
                   Placement="Bottom"
                   PlacementTarget="{Binding ElementName=ProfileButton}">
                <StackPanel Background="White"
                            Width="150"
                            Height="90"
                            Orientation="Vertical">
                    <Button Content="–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"
                            Width="150"
                            Height="30"
                            Background="Transparent"
                            BorderThickness="0"/>
                    <Button Content="–ú–æ–∏ —Å–µ—Å—Å–∏–∏"
                            Width="150"
                            Height="30"
                            Background="Transparent"
                            BorderThickness="0"/>
                    <Button Content="–í—ã—Ö–æ–¥"
                            Width="150"
                            Height="30"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="ExitButtonClick"/>
                </StackPanel>
            </Popup>
        </Grid>
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"
                                  Name="SidebarColumnDefinition"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0"
                  Background="AliceBlue">
                <TextBlock Text="–ù–∞–≤–∏–≥–∞—Ü–∏—è"
                           VerticalAlignment="Top"
                           HorizontalAlignment="Left"
                           FontSize="14"
                           Margin="10 10 0 0"/>
                <Button Content="X"
                        Height="30"
                        Width="30"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Click="SidebarButtonClick"
                        Background="LightBlue"
                        BorderThickness="0"/>
                <StackPanel Orientation="Vertical"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Width="200"
                            Margin="0 50 0 0"
                            Name="SidebarStackPanel">
                    <Button Content="–ì–ª–∞–≤–Ω–∞—è"
                            Style="{StaticResource SidebarButton}"
                            HorizontalContentAlignment="Left"
                            Click="MainButtonClick"/>
                    <Button Content="–ú–æ–Ω–∏—Ç–æ—Ä –¢–ê"
                            Style="{StaticResource SidebarButton}"
                            HorizontalContentAlignment="Left"
                            Click="MonitorTaButton_Click"/>
                    <Expander Header="–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã"
                              Style="{StaticResource SidebarExpander}">
                    </Expander>
                    <Expander Header="–£—á–µ—Ç –¢–ú–¶"
                              Style="{StaticResource SidebarExpander}">
                    </Expander>
                    <Expander Header="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ" 
                              Style="{StaticResource SidebarExpander}">
                        <StackPanel Background="LightBlue">
                            <Button Content="–¢–æ—Ä–≥–æ–≤—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã"
                                    Style="{StaticResource SidebarButton}"
                                    Click="VendingMachinesButtonClick"/>
                            <Button Content="–ö–æ–º–ø–∞–Ω–∏–∏"
                                    Style="{StaticResource SidebarButton}"/>
                            <Button Content="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
                                    Style="{StaticResource SidebarButton}"/>
                            <Button Content="–ú–æ–¥–µ–º—ã"
                                    Style="{StaticResource SidebarButton}"/>
                            <Button Content="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ"
                                    Style="{StaticResource SidebarButton}"/>
                        </StackPanel>
                    </Expander>
                </StackPanel>
            </Grid>
            <Frame Grid.Column="1"
                   Name="MainFrame"
                   Source="../Pages/MainPage.xaml"
                   NavigationUIVisibility="Hidden"/>
        </Grid>
    </Grid>
</Window>
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using VendingSystemWPF.Pages;

namespace VendingSystemWPF.Windows
{
    /// <summary>
    /// –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è GeneralWindow.xaml
    /// </summary>
    public partial class GeneralWindow : Window
    {
        public GeneralWindow(string userFio, string userRole)
        {
            InitializeComponent();

            FioTextBlock.Text = userFio;
            RoleTextBlock.Text = userRole;
        }

        private void ProfileButtonClick(object sender, RoutedEventArgs e)
        {
            if (ProfilePopup.IsOpen == false)
            {
                ProfilePopup.IsOpen = true;
            }
            else
            {
                ProfilePopup.IsOpen = false;
            }
        }

        private void SidebarButtonClick(object sender, RoutedEventArgs e)
        {
            if (SidebarColumnDefinition.Width.Value == 200)
            {
                SidebarColumnDefinition.Width = new GridLength(30);
                SidebarStackPanel.Visibility = Visibility.Collapsed;
            }
            else
            {
                SidebarColumnDefinition.Width = new GridLength(200);
                SidebarStackPanel.Visibility = Visibility.Visible;
            }
        }

        private void ExitButtonClick(object sender, RoutedEventArgs e)
        {
            if (MessageBox.Show("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?",
                    "–û–û–û –¢–æ—Ä–≥–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã",
                    MessageBoxButton.YesNo,
                    MessageBoxImage.Warning) == MessageBoxResult.Yes)
            {
                AuthWindow authWindow = new AuthWindow();
                authWindow.Show();
                this.Close();
            }
        }

        private void VendingMachinesButtonClick(object sender, RoutedEventArgs e)
        {
            MainFrame.Navigate(new VendingMachinesPage());
        }

        private void MainButtonClick(object sender, RoutedEventArgs e)
        {
            MainFrame.Navigate(new MainPage());
        }
        private void MonitorTaButton_Click(object sender, RoutedEventArgs e)
        {
            MainFrame.Navigate(new MonitorPage());
        }
    }
}
<Application x:Class="VendingSystemWPF.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:VendingSystemWPF"
             StartupUri="Windows/AuthWindow.xaml">
    <Application.Resources>
        <Style x:Key="SidebarButton" TargetType="Button">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Width" Value="200"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        <Style x:Key="SidebarExpander" TargetType="Expander">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FlowDirection" Value="LeftToRight"/>
        </Style>
        
        <!--–≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ –æ–∫–Ω–µ AddVendingMachinesWindow-->
        <Style x:Key="AddTextBlock" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0 0 0 20"/>
        </Style>
        <Style x:Key="AddTextBox" TargetType="TextBox">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Width" Value="200"/>
            <Setter Property="Margin" Value="0 20 0 0"/>
        </Style>
        <Style x:Key="AddDatePicker" TargetType="DatePicker">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Width" Value="200"/>
            <Setter Property="Margin" Value="0 20 0 0"/>
        </Style>
        <Style x:Key="AddComboBox" TargetType="ComboBox">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Width" Value="200"/>
            <Setter Property="Margin" Value="0 20 0 0"/>
        </Style>


        <!-- –î–û–ë–ê–í–¨ –≠–¢–û–¢ –ë–õ–û–ö -->
        <DropShadowEffect x:Key="MyShadow" ShadowDepth="2" Color="Gray" Opacity="0.3" BlurRadius="5"/>
    </Application.Resources>
</Application>
