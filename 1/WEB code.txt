{
  "$schema": "http://json.schemastore.org/launchsettings.json",
  "iisSettings": {
    "windowsAuthentication": false,
    "anonymousAuthentication": true,
    "iisExpress": {
      "applicationUrl": "http://localhost:44369",
      "sslPort": 44330
    }
  },
  "profiles": {
    "http": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "applicationUrl": "http://localhost:5209",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "https": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "applicationUrl": "https://localhost:7070;http://localhost:5209",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "IIS Express": {
      "commandName": "IISExpress",
      "launchBrowser": true,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/VendingSystemWeb.styles.css" asp-append-version="true" />
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
            <div class="container">
                <a class="navbar-brand" asp-area="" asp-page="/Index">Добро пожаловать! (или главная)</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                    <ul class="navbar-nav flex-grow-1">

                        @* ДОБАВЛЯЕМ *@
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-page="/Index">Торговые автоматы</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-page="/Calendar">Календарь обслуживания</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-page="/WorkSchedule">График работ</a>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2026 - Торговые автоматы
        </div>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
@page
@model VendingSystemWeb.Pages.CalendarModel
@{
    ViewData["Title"] = "Календарь обслуживания";
}

<style>
    .event {
        padding: 8px;
        margin-bottom: 5px;
        border-radius: 4px;
        border: 1px solid #ddd;
    }

    .event-green {
        background-color: #d4edda;
    }

    .event-yellow {
        background-color: #fff3cd;
    }

    .event-red {
        background-color: #f8d7da;
    }
</style>

<h1>@ViewData["Title"]</h1>
<p>Список предстоящих и просроченных работ.</p>
<hr />

@foreach (var ev in Model.Events.OrderBy(e => e.EventDate))
{
    <div class="event @ev.ColorCssClass">
        <strong>@ev.EventDate.ToString("dd.MM.yyyy")</strong> — @ev.Title
    </div>
}
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;
using VendingSystemAPI.Models;

namespace VendingSystemWeb.Pages
{
    public class CalendarEvent
    {
        public string Title { get; set; }
        public DateTime EventDate { get; set; }
        public string ColorCssClass { get; set; }
    }

    public class CalendarModel : PageModel
    {
        // Список событий, который мы покажем
        public List<CalendarEvent> Events { get; set; } = new List<CalendarEvent>();

        // ЭТОТ МЕТОД ТЕПЕРЬ СУПЕР-ПРОСТОЙ
        public void OnGet()
        {
            // --- ОДНО КРАСНОЕ ---
            Events.Add(new CalendarEvent
            {
                EventDate = DateTime.Now.AddDays(-10),
                Title = "Просрочено: Ремонт 'Автомат-1'",
                ColorCssClass = "event-red"
            });

            // --- ОДНО ЖЕЛТОЕ ---
            Events.Add(new CalendarEvent
            {
                EventDate = DateTime.Now.AddDays(5),
                Title = "Скоро: ТО 'Автомат-2'",
                ColorCssClass = "event-yellow"
            });

            // --- А ТЕПЕРЬ НЕСКОЛЬКО ЗЕЛЕНЫХ (ПРОСТО КОПИПАСТ) ---
            Events.Add(new CalendarEvent
            {
                EventDate = DateTime.Now.AddDays(30),
                Title = "Плановое ТО 'Автомат-3'",
                ColorCssClass = "event-green"
            });
        }
    }
}
@page
@model IndexModel
@{
    ViewData["Title"] = "Торговые автоматы";
}

<style>
    body {
        background-color: aliceblue; /* фон */
    }
</style>


<h1>@ViewData["Title"]</h1>
<p>Список автоматов, зарегистрированных в системе.</p>
<hr />

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Адрес</th>
            <th>Модель</th>
            <th>Серийный номер</th>
            <th>Инвентарный номер</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var machine in Model.VendingMachines)
        {
            <tr>
                <td>@machine.Id</td>
                <td>@machine.Name</td>
                <td>@machine.Address</td>
                <td>@machine.Model</td>
                <td>@machine.SerialNumber</td>
                <td>@machine.InventoryNumber</td>
            </tr>
        }
    </tbody>
</table>
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;
using VendingSystemAPI.Models;

namespace VendingSystemWeb.Pages
{
    public class IndexModel : PageModel
    {
        private readonly VendingSystemDbContext _context;
        public List<VendingMachine> VendingMachines { get; set; }

        public IndexModel(VendingSystemDbContext context)
        {
            _context = context;
        }

        // Этот метод просто загружает твою таблицу. И всё.
        public void OnGet()
        {
            VendingMachines = _context.VendingMachines.ToList();
        }
    }
}
@page
@model VendingSystemWeb.Pages.WorkScheduleModel
@{
    ViewData["Title"] = "График работ";
}

<h1>В разработке...</h1>
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;

namespace VendingSystemWeb.Pages
{
    public class WorkScheduleModel : PageModel
    {
        public void OnGet()
        {
        }
    }
}
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=.\\SQLEXPRESS;Initial Catalog=VendingSystemDB;Integrated Security=True;Trust Server Certificate=True"
  },

  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
using Microsoft.EntityFrameworkCore;
using VendingSystemAPI.Models;



var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
builder.Services.AddRazorPages();


// --- НАЧАЛО БАЗОВОЙ КОНФИГУРАЦИИ ---

// 1. Добавляем сервисы для Razor Pages.
builder.Services.AddRazorPages();

// 2. Получаем строку подключения из appsettings.json
var connectionString = builder.Configuration.GetConnectionString("DefaultConnection");

// 3. Регистрируем ваш DbContext для работы с базой данных
builder.Services.AddDbContext<VendingSystemDbContext>(options =>
    options.UseSqlServer(connectionString));

// --- КОНЕЦ БАЗОВОЙ КОНФИГУРАЦИИ ---





var app = builder.Build(); // было уже

// Configure the HTTP request pipeline.
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error");
    // The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();

app.UseRouting();

app.UseAuthorization();

app.MapRazorPages();

app.Run();
